<template>
  <div class="sidebar-wrapper">
    <div class="sidebar">
      <div class="logo-wrapper" :class="{
        // нужно для анимации
        'logo-wrapper--hide-animate-logo': hideAnimateLogo
      }">
        <!--Нужно для анимации-->
        <router-link v-if="showLoggo" to="/">
          <div class="logo_img_container">
            <img class="logo_img" src="../assets/images/logo.png">
            <div class="logo_img_text">МТиК КЧР</div>
          </div>
        </router-link>
        <div class="toggle-bar" @click="toggleMenu">
          <svg width="30" height="23" viewBox="0 0 30 23" fill="none" xmlns="http://www.w3.org/2000/svg">
            <line x1="1.5" y1="1.5" x2="27.5172" y2="1.5" stroke="black" stroke-width="3" stroke-linecap="round" />
            <line x1="1.50879" y1="11.5" x2="27.526" y2="11.5" stroke="black" stroke-width="3" stroke-linecap="round" />
            <line x1="1.50879" y1="21.5" x2="27.526" y2="21.5" stroke="black" stroke-width="3" stroke-linecap="round" />
          </svg>
        </div>
      </div>
      <transition enter-active-class="sidebar-animate--slide-in-start" enter-to-class="sidebar-animate--slide-in"
        leave-active-class="sidebar-animate--slide-out" @before-leave="showLoggo = false; hideAnimateLogo = true"
        @after-enter="showLoggo = true; hideAnimateLogo = false">
        <div v-if="this.$store.getters.triggerMenu" class="sidebar-animate">
          <div class="sidebar-main-info">
            <div class="user">
              <div class="image">
                <img v-if="!$store.state.Login.image" src="../assets/images/user/logo.png" />
                <img v-else :src="$store.state.Login.image">
              </div>
              <p class="name">{{ $store.state.Login.fullName }}</p>
              <p class="email">{{ $store.state.Login.email }}</p>
            </div>
            <div class="menu">
              <p class="title">Меню</p>
              <a class="menu-item-list dropdown" :class="{ act: isOpen }"
                @click="action = action === 'management' ? '' : 'management', isOpen = !isOpen">
                <div class="item ">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M8.5 1H3.5C2.11929 1 1 2.11929 1 3.5V5.5C1 6.88071 2.11929 8 3.5 8H8.5C9.88071 8 11 6.88071 11 5.5V3.5C11 2.11929 9.88071 1 8.5 1Z"
                      :fill="!isOpen ? '#c1c1c1' : '#F66F4D'" />
                    <path
                      d="M20.5 16H15.5C14.1193 16 13 17.1193 13 18.5V20.5C13 21.8807 14.1193 23 15.5 23H20.5C21.8807 23 23 21.8807 23 20.5V18.5C23 17.1193 21.8807 16 20.5 16Z"
                      :fill="!isOpen ? '#c1c1c1' : '#F66F4D'" />
                    <path
                      d="M8.5 9H3.5C2.11929 9 1 10.1193 1 11.5V20.5C1 21.8807 2.11929 23 3.5 23H8.5C9.88071 23 11 21.8807 11 20.5V11.5C11 10.1193 9.88071 9 8.5 9Z"
                      :fill="!isOpen ? '#c1c1c1' : '#F66F4D'" />
                    <path
                      d="M20.5 1H15.5C14.1193 1 13 2.11929 13 3.5V12.5C13 13.8807 14.1193 15 15.5 15H20.5C21.8807 15 23 13.8807 23 12.5V3.5C23 2.11929 21.8807 1 20.5 1Z"
                      :fill="!isOpen ? '#c1c1c1' : '#F66F4D'" />
                  </svg>
                  <span :style="'color: ' + !isOpen ? '#717579' : '#717579'">Туристический поток</span>
                </div>
                <div class="dropdown" v-if="action === 'management'">
                  <router-link @click="isOpen = true" to="/">
                    Статистика
                  </router-link>
                  <router-link @click="isOpen = true" to="/data">
                    Данные
                  </router-link>
                </div>
              </a>
              <a class="menu-item-list dropdown" :class="{ act: isOpen }"
                @click="action = action === 'management' ? '' : 'management', isOpen = !isOpen">
                <div class="item ">
                  <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M19 5H18V3C18 2.73478 17.8946 2.48043 17.7071 2.29289C17.5196 2.10536 17.2652 2 17 2C16.7348 2 16.4804 2.10536 16.2929 2.29289C16.1054 2.48043 16 2.73478 16 3V5H8V3C8 2.73478 7.89464 2.48043 7.70711 2.29289C7.51957 2.10536 7.26522 2 7 2C6.73478 2 6.48043 2.10536 6.29289 2.29289C6.10536 2.48043 6 2.73478 6 3V5H5C4.20435 5 3.44129 5.31607 2.87868 5.87868C2.31607 6.44129 2 7.20435 2 8V9H22V8C22 7.20435 21.6839 6.44129 21.1213 5.87868C20.5587 5.31607 19.7957 5 19 5Z"
                      :fill="!isOpen ? '#c1c1c1' : '#F66F4D'"  />
                    <path
                      d="M2 19C2 19.7956 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H19C19.7957 22 20.5587 21.6839 21.1213 21.1213C21.6839 20.5587 22 19.7956 22 19V11H2V19Z"
                      :fill="!isOpen ? '#c1c1c1' : '#F66F4D'"  />
                  </svg>
                  <span :style="'color: ' + !isOpen ? '#717579' : '#717579'">ВРП</span>
                </div>
                <div class="dropdown" v-if="action === 'management'">
                  <router-link @click="isOpen = true" to="/management/">
                    Статистика
                  </router-link>
                  <router-link @click="isOpen = true" to="/management/data">
                    Данные
                  </router-link>
                </div>
              </a>
              <router-link @click="isOpen = false" class="menu-item" to="/clients">
                <div class="item">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M23 19C23 19.2652 22.8946 19.5196 22.7071 19.7071C22.5196 19.8946 22.2652 20 22 20H10C9.73478 20 9.48043 19.8946 9.29289 19.7071C9.10536 19.5196 9 19.2652 9 19C9 17.4087 9.63214 15.8826 10.7574 14.7573C11.8826 13.6321 13.4087 13 15 13H17C18.5913 13 20.1174 13.6321 21.2426 14.7573C22.3679 15.8826 23 17.4087 23 19ZM16 4C15.2089 4 14.4355 4.2346 13.7777 4.67412C13.1199 5.11365 12.6072 5.73836 12.3045 6.46926C12.0017 7.20017 11.9225 8.00443 12.0769 8.78036C12.2312 9.55628 12.6122 10.269 13.1716 10.8284C13.731 11.3878 14.4437 11.7688 15.2196 11.9231C15.9956 12.0775 16.7998 11.9983 17.5307 11.6955C18.2616 11.3928 18.8864 10.8801 19.3259 10.2223C19.7654 9.56448 20 8.79112 20 8C20 6.93913 19.5786 5.92172 18.8284 5.17157C18.0783 4.42143 17.0609 4 16 4ZM7 4C6.20887 4 5.43552 4.2346 4.77772 4.67412C4.11992 5.11365 3.60723 5.73836 3.30448 6.46926C3.00173 7.20017 2.92252 8.00443 3.07686 8.78036C3.2312 9.55628 3.61216 10.269 4.17157 10.8284C4.73098 11.3878 5.44371 11.7688 6.21964 11.9231C6.99556 12.0775 7.79983 11.9983 8.53073 11.6955C9.26164 11.3928 9.88635 10.8801 10.3259 10.2223C10.7654 9.56448 11 8.79112 11 8C11 6.93913 10.5786 5.92172 9.82843 5.17157C9.07828 4.42143 8.06087 4 7 4ZM7 19C6.99851 17.9496 7.20546 16.9094 7.60884 15.9395C8.01223 14.9697 8.60404 14.0895 9.35 13.35C8.73954 13.1195 8.09253 13.0009 7.44 13H6.56C5.08621 13.0026 3.67354 13.5893 2.63141 14.6314C1.58928 15.6735 1.00264 17.0862 1 18.56V19C1 19.2652 1.10536 19.5196 1.29289 19.7071C1.48043 19.8946 1.73478 20 2 20H7.18C7.06358 19.6793 7.0027 19.3411 7 19Z"
                      fill="#C1C1C1" />
                  </svg>
                  <span>Реестр КСР</span>
                </div>
              </router-link>
              <a class="menu-item-list dropdown" :class="{ act: isOpen }"
                @click="action = action === 'management' ? '' : 'management', isOpen = !isOpen">
                <div class="item ">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_1860_11443)">
                      <path
                        d="M20.25 11.25H18.75V7.5C18.75 6.90326 18.5129 6.33097 18.091 5.90901C17.669 5.48705 17.0967 5.25 16.5 5.25H12.75V3.75C12.75 2.95435 12.4339 2.19129 11.8713 1.62868C11.3087 1.06607 10.5456 0.75 9.75 0.75C8.95435 0.75 8.19129 1.06607 7.62868 1.62868C7.06607 2.19129 6.75 2.95435 6.75 3.75V5.25H3C2.40326 5.25 1.83097 5.48705 1.40901 5.90901C0.987053 6.33097 0.75 6.90326 0.75 7.5V12C0.75 12.1989 0.829018 12.3897 0.96967 12.5303C1.11032 12.671 1.30109 12.75 1.5 12.75H3.75C4.14782 12.75 4.52936 12.908 4.81066 13.1893C5.09196 13.4706 5.25 13.8522 5.25 14.25C5.25 14.6478 5.09196 15.0294 4.81066 15.3107C4.52936 15.592 4.14782 15.75 3.75 15.75H1.5C1.30109 15.75 1.11032 15.829 0.96967 15.9697C0.829018 16.1103 0.75 16.3011 0.75 16.5V21C0.75 21.5967 0.987053 22.169 1.40901 22.591C1.83097 23.0129 2.40326 23.25 3 23.25H7.5C7.69891 23.25 7.88968 23.171 8.03033 23.0303C8.17098 22.8897 8.25 22.6989 8.25 22.5V20.25C8.25 19.8522 8.40804 19.4706 8.68934 19.1893C8.97064 18.908 9.35218 18.75 9.75 18.75C10.1478 18.75 10.5294 18.908 10.8107 19.1893C11.092 19.4706 11.25 19.8522 11.25 20.25V22.5C11.25 22.6989 11.329 22.8897 11.4697 23.0303C11.6103 23.171 11.8011 23.25 12 23.25H16.5C17.0967 23.25 17.669 23.0129 18.091 22.591C18.5129 22.169 18.75 21.5967 18.75 21V17.25H20.25C21.0456 17.25 21.8087 16.9339 22.3713 16.3713C22.9339 15.8087 23.25 15.0456 23.25 14.25C23.25 13.4544 22.9339 12.6913 22.3713 12.1287C21.8087 11.5661 21.0456 11.25 20.25 11.25Z"
                        :fill="!isOpen ? '#c1c1c1' : '#F66F4D'" />
                    </g>
                    <defs>
                      <clipPath id="clip0_1860_11443">
                        <rect width="24" height="24" :fill="!isOpen ? '#c1c1c1' : '#F66F4D'" />
                      </clipPath>
                    </defs>
                  </svg>
                  <span :style="'color: ' + !isOpen ? '#717579' : '#717579'">КСР</span>
                </div>
                <div class="dropdown" v-if="action === 'management'">
                  <router-link @click="isOpen = true" to="/ksr/1">
                    <span>Число ночевок в КСР</span>
                  </router-link>
                  <router-link @click="isOpen = true" to="/ksr/2">
                    <span>Число граждан, размещённых в КСР</span>
                  </router-link>
                  <router-link @click="isOpen = true" to="/ksr/3">
                    <span>Актуальный каталог респондентов из Росстата</span>
                  </router-link>
                </div>
              </a>
              <router-link @click="isOpen = false" class="menu-item" to="/reports">
                <div class="item">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_1860_11449)">
                      <path
                        d="M17.2057 0C13.4563 0 10.4133 3.04152 10.4133 6.79238C10.4133 7.83836 10.6698 8.81957 11.091 9.704L0.443649 20.3561C-0.146581 20.9464 -0.146581 21.9003 0.443649 22.4906L1.51086 23.5578C1.79316 23.8416 2.17646 24 2.57806 24C2.97801 24 3.3615 23.8416 3.64527 23.5578L6.01808 21.185L8.18706 23.3586C8.47083 23.6409 8.85408 23.7993 9.25427 23.7993C9.65592 23.7993 10.0392 23.6423 10.3215 23.3586L10.856 22.8244C11.4462 22.2341 11.4462 21.2802 10.856 20.6899L8.68385 18.5164L14.2941 12.9057C15.1816 13.3283 16.1597 13.5848 17.2072 13.5848C20.9594 13.5848 23.9995 10.5432 23.9995 6.79238C23.9995 3.04152 20.9597 0 17.2057 0ZM17.2057 10.5659C15.1242 10.5659 13.4322 8.87221 13.4322 6.79238C13.4322 4.71254 15.1242 3.01883 17.2057 3.01883C19.2872 3.01883 20.9792 4.71254 20.9792 6.79238C20.9792 8.87221 19.2872 10.5659 17.2057 10.5659Z"
                        fill="#C1C1C1" />
                    </g>
                    <defs>
                      <clipPath id="clip0_1860_11449">
                        <rect width="24" height="24" fill="white" />
                      </clipPath>
                    </defs>
                  </svg>
                  <span>Отчёты</span>
                </div>
              </router-link>
              <router-link @click="isOpen = false" class="menu-item" to="/settings">
                <div class="item">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M21.9075 8.87987C21.4699 8.8163 21.0522 8.65482 20.6856 8.40746C20.3191 8.1601 20.013 7.83323 19.7903 7.45119C19.5675 7.06915 19.4339 6.64178 19.3992 6.20091C19.3645 5.76004 19.4297 5.31703 19.59 4.90487C19.6919 4.63541 19.7069 4.34083 19.6329 4.06241C19.559 3.784 19.3997 3.53571 19.1775 3.35237C18.1965 2.52862 17.0799 1.8815 15.8775 1.43987C15.6037 1.33816 15.3048 1.32545 15.0233 1.40355C14.7419 1.48166 14.4922 1.6466 14.31 1.87487C14.0357 2.22561 13.6852 2.50928 13.2849 2.70438C12.8847 2.89947 12.4453 3.00086 12 3.00086C11.5548 3.00086 11.1153 2.89947 10.7151 2.70438C10.3149 2.50928 9.96431 2.22561 9.69002 1.87487C9.50778 1.6466 9.25816 1.48166 8.9767 1.40355C8.69525 1.32545 8.39632 1.33816 8.12252 1.43987C7.01227 1.8476 5.97421 2.42993 5.04752 3.16487C4.81392 3.34979 4.64567 3.60464 4.56739 3.89211C4.48912 4.17957 4.50493 4.48454 4.61252 4.76237C4.78558 5.18544 4.85709 5.64318 4.8213 6.09887C4.7855 6.55456 4.64341 6.99552 4.40642 7.38638C4.16942 7.77724 3.84412 8.10712 3.45661 8.34955C3.0691 8.59198 2.63016 8.74022 2.17502 8.78237C1.87952 8.81396 1.60198 8.9396 1.38325 9.14077C1.16452 9.34195 1.01616 9.60804 0.960016 9.89987C0.820364 10.5911 0.750016 11.2946 0.750016 11.9999C0.74899 12.5903 0.796651 13.1798 0.892516 13.7624C0.940227 14.0635 1.08583 14.3406 1.3068 14.5507C1.52778 14.7609 1.81182 14.8924 2.11502 14.9249C2.58016 14.9685 3.02808 15.123 3.42129 15.3752C3.8145 15.6275 4.14156 15.9704 4.37509 16.375C4.60862 16.7796 4.74182 17.2343 4.76356 17.701C4.78529 18.1677 4.69492 18.6328 4.50002 19.0574C4.37246 19.3335 4.34082 19.6444 4.41012 19.9406C4.47942 20.2369 4.64568 20.5014 4.88252 20.6924C5.8576 21.5012 6.96345 22.1378 8.15252 22.5749C8.30457 22.6275 8.46411 22.6554 8.62502 22.6574C8.84564 22.6569 9.06294 22.6035 9.25868 22.5017C9.45443 22.3999 9.62292 22.2527 9.75002 22.0724C10.0173 21.6829 10.3757 21.3646 10.7939 21.145C11.2121 20.9254 11.6776 20.8112 12.15 20.8124C12.6077 20.8129 13.0589 20.9204 13.4678 21.1261C13.8766 21.3318 14.2318 21.6302 14.505 21.9974C14.6867 22.2417 14.9442 22.419 15.2372 22.5017C15.5302 22.5845 15.8423 22.568 16.125 22.4549C17.2123 22.0173 18.2245 21.4125 19.125 20.6624C19.3512 20.4753 19.5123 20.2214 19.5851 19.937C19.6578 19.6527 19.6386 19.3526 19.53 19.0799C19.3536 18.6623 19.2767 18.2094 19.3053 17.7569C19.334 17.3045 19.4674 16.8649 19.6951 16.4729C19.9227 16.0808 20.2384 15.7471 20.6171 15.4979C20.9959 15.2488 21.4274 15.0911 21.8775 15.0374C22.1694 14.997 22.4409 14.8648 22.6526 14.6598C22.8643 14.4548 23.0052 14.1878 23.055 13.8974C23.1755 13.2718 23.2407 12.6369 23.25 11.9999C23.2502 11.328 23.1874 10.6576 23.0625 9.99737C23.0119 9.71334 22.873 9.4525 22.6657 9.25189C22.4583 9.05128 22.1931 8.92111 21.9075 8.87987ZM15.75 11.9999C15.75 12.7415 15.5301 13.4666 15.118 14.0833C14.706 14.6999 14.1203 15.1806 13.4351 15.4644C12.7499 15.7482 11.9959 15.8225 11.2684 15.6778C10.541 15.5331 9.87281 15.176 9.34837 14.6515C8.82392 14.1271 8.46677 13.4589 8.32207 12.7315C8.17738 12.004 8.25164 11.25 8.53547 10.5648C8.8193 9.87958 9.29994 9.29391 9.91663 8.88186C10.5333 8.4698 11.2583 8.24987 12 8.24987C12.9946 8.24987 13.9484 8.64496 14.6517 9.34822C15.3549 10.0515 15.75 11.0053 15.75 11.9999Z"
                      fill="#C1C1C1" />
                  </svg>
                  <span>Настройки</span>
                </div>
              </router-link>
            </div>
          </div>
        </div>
      </transition>
    </div>
  </div>
</template>

<script>

export default {
  name: 'sidebar',
  data: function () {
    return {
      action: '',
      showLoggo: true,
      hideAnimateLogo: false,
      isOpen: false
    }
  },
  computed: {},
  methods: {
    toggleMenu: function () {
      this.$store.dispatch('toggleMenu')
    }
  }
}
</script>
<style>
.logo_img_container {
  width: 260px;
  margin: 5px auto;
  display: flex;
  align-items: center;
}

.logo_img_text {
  text-align: center;
  font-weight: bold;
  font-size: 30px;
  width: 100%;
}

.logo_img {
  width: 50px;
  position: relative;
  z-index: 10;
}
</style>
